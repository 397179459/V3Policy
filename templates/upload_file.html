{% extends 'layout.html' %}

{% block title %}Show files{% endblock %}

{% block content %}

    <head>
        <meta charset="UTF-8">
        <title>Title</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        {#        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>#}
        {#        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>#}
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

        {#        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>#}
        <style>
            .success {
                color: green
            }


        </style>
    </head>
    <body>
    <br><br>

    <div align="center">
        <div class="container-fluid ">


            <h5 class="text-primary">V3 Policy 转换工具</h5>
            <p>V0019729 wanglei03@visionox.com</p>
            <p>20220112 @Version 1.0 </p>
            <td>
                请选择你需要转换的 Policy Excel 文件
            </td>
            <hr>
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% for category, message in messages %}
                    <div class="{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endwith %}
            <br>

            <form name="MyFrom" enctype="multipart/form-data">
                {#                <p>#}
                {#                    <text>Factory</text><input type="text" name="Factory" autocomplete="off">#}
                {#                </p>#}
                <p>
                    <label><input name="RadioFactory" type="radio" value="ARRAY" checked="True"/>ARRAY </label>
                    <label><input name="RadioFactory" type="radio" value="TP"/>TP </label>
                    <label><input name="RadioFactory" type="radio" value="OLED"/>OLED </label>
                    <label><input name="RadioFactory" type="radio" value="PANEL"/>PANEL </label>
                </p>
                <p>
                    ProductSpec：<input type="text" name="ProductSpec" id="ProductSpec" autocomplete="off" value="213123fdGDG">
                </p>
                <p>
                    <input type="file" name="file" autocomplete="off" class="btn btn-dark">
                    <input type="submit" value="Submit" onclick="submitForm()" class="btn btn-success">
                </p>
            </form>
        </div>
    </div>

    <script>
        function submitForm() {

            var radioChoseFlag = false;
            for (var i = 0; i < MyFrom.RadioFactory.length; i++) {
                if (MyFrom.RadioFactory[i].checked) {
                    radioChoseFlag = true;
                }
            }

            if (!radioChoseFlag) {
                alert("为什么不选择一个厂别呢~！");
                {#MyFrom.RadioFactory.focus();#}
                return;
            }


            var spec = MyFrom.ProductSpec.value;
            if (spec == "" || spec == null) {
                alert("为什么不输入 ProductSpec 呢 ~！");
                {#MyFrom.ProductSpec.focus();#}
                return;
            }

            var file = MyFrom.file.value;
            if (file == "" || file == null) {
                alert("请选择需要转换的文件 ~！");
                {#MyFrom.ProductSpec.focus();#}
                return;
            }

            MyFrom.method = "POST";
            {#MyFrom.action="/upload";#}
            MyFrom.Submit();

        }


    </script>


{% endblock %}